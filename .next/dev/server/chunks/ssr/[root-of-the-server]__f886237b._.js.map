{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/mon-saas-ugc/lib/supabase.ts"],"sourcesContent":["// lib/supabase.ts\n\nimport { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\n// ‚ö†Ô∏è UN SEUL CLIENT pour toute l'app\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    persistSession: true,\n    autoRefreshToken: true,\n  }\n})"],"names":[],"mappings":";;;;AAAA,kBAAkB;AAElB;;AAEA,MAAM;AACN,MAAM;AAGC,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;IACpB;AACF"}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///Users/arthur/mon-saas-ugc/app/create/page.tsx"],"sourcesContent":["// app/create/page.tsx\n\n'use client'\n\nimport { useState, useEffect } from 'react'\nimport { supabase } from '@/lib/supabase'\nimport { useRouter } from 'next/navigation'\n\nconst avatars = [\n  { id: 'emma', name: 'Emma', image: 'https://i.pravatar.cc/150?img=1' },\n  { id: 'marcus', name: 'Marcus', image: 'https://i.pravatar.cc/150?img=12' },\n  { id: 'sophie', name: 'Sophie', image: 'https://i.pravatar.cc/150?img=5' },\n  { id: 'lucas', name: 'Lucas', image: 'https://i.pravatar.cc/150?img=13' },\n  { id: 'maya', name: 'Maya', image: 'https://i.pravatar.cc/150?img=9' },\n  { id: 'alex', name: 'Alex', image: 'https://i.pravatar.cc/150?img=15' },\n]\n\nexport default function CreateVideoPage() {\n  const [script, setScript] = useState('')\n  const [selectedAvatar, setSelectedAvatar] = useState('emma')\n  const [credits, setCredits] = useState(0)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const router = useRouter()\n\n  useEffect(() => {\n    loadUserCredits()\n  }, [])\n\n  async function loadUserCredits() {\n    const { data: { user } } = await supabase.auth.getUser()\n    \n    if (!user) {\n      router.push('/login')\n      return\n    }\n\n    const { data } = await supabase\n      .from('users')\n      .select('credits')\n      .eq('id', user.id)\n      .single()\n\n    if (data) setCredits(data.credits)\n  }\n\n  async function handleGenerate() {\n    if (!script.trim()) {\n      setError('Le script ne peut pas √™tre vide')\n      return\n    }\n\n    if (script.length < 20) {\n      setError('Le script doit faire au moins 20 caract√®res')\n      return\n    }\n\n    if (credits < 10) {\n      setError('Pas assez de cr√©dits ! (10 cr√©dits requis)')\n      return\n    }\n\n    setLoading(true)\n    setError('')\n\n    try {\n      const response = await fetch('/api/generate-video', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          script,\n          avatarId: selectedAvatar\n        })\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) throw new Error(data.error)\n\n      // Redirige vers la page de visualisation\n      router.push(`/video/${data.videoId}`)\n\n    } catch (err: any) {\n      setError(err.message || 'Une erreur est survenue')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <header className=\"bg-white shadow\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center\">\n          <a href=\"/dashboard\" className=\"text-xl font-bold\">‚Üê Retour</a>\n          <div className=\"text-sm\">\n            <span className=\"text-gray-600\">Cr√©dits : </span>\n            <span className=\"font-bold text-lg\">{credits}</span>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-4xl mx-auto px-4 py-8\">\n        <h1 className=\"text-3xl font-bold mb-8\">Cr√©er une vid√©o UGC</h1>\n\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-600 p-4 rounded-lg mb-6\">\n            {error}\n          </div>\n        )}\n\n        {/* Script */}\n        <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\n          <label className=\"block text-lg font-medium mb-3\">\n            üìù √âcris ton script\n          </label>\n          <textarea\n            value={script}\n            onChange={(e) => setScript(e.target.value)}\n            placeholder=\"Exemple : Hey ! Tu cherches un sac ultra-l√©ger ? J'ai trouv√© celui-ci et franchement, game changer. Il est waterproof, il rentre mon laptop, ma gourde, tout ! Le meilleur ? 30‚Ç¨ seulement. Lien en bio !\"\n            rows={8}\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none\"\n          />\n          <div className=\"flex justify-between items-center mt-2\">\n            <p className=\"text-sm text-gray-500\">\n              {script.length} caract√®res {script.length < 20 && '(min 20)'}\n            </p>\n            <p className=\"text-sm text-gray-500\">\n              ~{Math.ceil(script.length / 200)} seconde(s) de vid√©o\n            </p>\n          </div>\n        </div>\n\n        {/* Avatars */}\n        <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\n          <label className=\"block text-lg font-medium mb-4\">\n            üë§ Choisis un avatar\n          </label>\n          <div className=\"grid grid-cols-3 md:grid-cols-6 gap-4\">\n            {avatars.map(avatar => (\n              <div\n                key={avatar.id}\n                onClick={() => setSelectedAvatar(avatar.id)}\n                className={`\n                  cursor-pointer rounded-lg p-3 text-center transition-all\n                  ${selectedAvatar === avatar.id \n                    ? 'ring-4 ring-blue-500 bg-blue-50' \n                    : 'border-2 border-gray-200 hover:border-blue-300'\n                  }\n                `}\n              >\n                <img\n                  src={avatar.image}\n                  alt={avatar.name}\n                  className=\"w-20 h-20 rounded-full mx-auto mb-2 object-cover\"\n                />\n                <p className=\"text-sm font-medium\">{avatar.name}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Options */}\n        <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\n          <label className=\"block text-lg font-medium mb-4\">\n            ‚öôÔ∏è Options\n          </label>\n          <div className=\"space-y-3\">\n            <label className=\"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50\">\n              <input type=\"checkbox\" className=\"w-5 h-5\" defaultChecked />\n              <div>\n                <div className=\"font-medium\">Sous-titres automatiques</div>\n                <div className=\"text-sm text-gray-500\">+0 cr√©dit</div>\n              </div>\n            </label>\n            <label className=\"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50\">\n              <input type=\"checkbox\" className=\"w-5 h-5\" />\n              <div>\n                <div className=\"font-medium\">Ajouter B-roll</div>\n                <div className=\"text-sm text-gray-500\">+5 cr√©dits</div>\n              </div>\n            </label>\n          </div>\n        </div>\n\n        {/* Bouton */}\n        <button\n          onClick={handleGenerate}\n          disabled={loading || !script || credits < 10}\n          className=\"w-full bg-blue-600 text-white py-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-lg transition\"\n        >\n          {loading ? (\n            '‚è≥ G√©n√©ration en cours...'\n          ) : (\n            `üé¨ G√©n√©rer la vid√©o (10 cr√©dits)`\n          )}\n        </button>\n\n        {credits < 10 && (\n          <p className=\"text-center text-red-600 mt-4\">\n            ‚ö†Ô∏è Pas assez de cr√©dits. <a href=\"/pricing\" className=\"underline\">Acheter des cr√©dits</a>\n          </p>\n        )}\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}